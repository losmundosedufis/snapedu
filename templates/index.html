<!DOCTYPE html>
<html lang="gl">
<head>
  <meta charset="UTF-8" />
  <style>
    .thumbnail-container img {
      width: 120px;
      height: auto;
      border: 2px solid #ccc;
      border-radius: 4px;
      transition: transform 0.2s ease;
    }

    .thumbnail-container img:hover {
      transform: scale(1.05);
      border-color: #fff;
    }
    
    .video-wrapper {
      position: relative;
      display: inline-block;
      width: 640px;
      height: 480px;
      border: 2px solid #00ffaa50;
      border-radius: 10px;
      overflow: hidden;
    }

    #preview, #onion-skin-canvas {
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    #preview {
      z-index: 1;
    }

    #onion-skin-canvas {
      z-index: 2;
      pointer-events: none;
    }
  </style>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/main.css') }}">
  <meta name="theme-color" content="#3399ff" />
  <title>Stopmotion Classroom</title>
</head>
<body class="app-container">
  <header>
    <h1>🎬 Stopmotion Classroom</h1>
    <p id="privacyNotice">Esta app funciona completamente en local. Non se recollen datos nin se envían a servidores.</p>
  </header>

  <main class="main-layout">
    <section id="video-section">
      <div class="video-wrapper">
        <video id="preview" autoplay muted playsinline></video>
        <canvas id="onion-skin-canvas"></canvas>
      </div>
    </section>

    <div style="text-align: center; margin: 10px;">
      <label for="camera-select">Selecciona cámara:</label>
      <select id="camera-select" style="margin: 10px; font-size: 1rem;"></select>
    </div>

    <div id="controls" style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin-top: 10px;">
      <button id="capture" title="Capturar"><span>📸</span></button>
      <button id="duplicate" title="Duplicar"><span>➕</span></button>
      <button id="delete" title="Eliminar"><span>🗑️</span></button>
      <button id="zoom-in" title="Zoom +"><span>🔍➕</span></button>
      <button id="zoom-out" title="Zoom -"><span>🔍➖</span></button>
      <button id="toggle-grid" title="Grella"><span>🔲</span></button>
      <button id="save-project" title="Gardar proxecto"><span>💾</span></button>
      <button id="load-project" title="Cargar proxecto"><span>📂</span></button>
      <button id="play-animation" title="Reproducir"><span>▶️</span></button>
      <button id="stop-animation" title="Parar"><span>🟥</span></button>
      <button id="export-video" title="Exportar vídeo"><span>🎞️</span></button>
      <div style="text-align: center; margin: 10px;">
        <label for="onionOpacity">Opacidade do Onion Skin:</label>
        <input type="range" id="onionOpacity" min="0" max="1" step="0.05" value="0.5" style="width: 200px;">
      </div>
    </div>

    <div id="framesContainer" class="frames-container"></div>

    <div id="thumbnail-container" class="thumbnail-container" style="display: flex; justify-content: center; flex-wrap: wrap; gap: 10px; padding: 10px;">
      <!-- Thumbnails will be dynamically inserted here -->
    </div>
  </main>

  <script type="module" src="{{ url_for('static', filename='src/main.js') }}"></script>
</body>
</html>